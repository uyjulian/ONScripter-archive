<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML lang="ja">
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=EUC-JP">
<TITLE>ONScripter のページ</TITLE>
<LINK rel="stylesheet" type="text/css" href="ogapee.css">
</HEAD>

<BODY>

<H1>ONScripter のページ</H1>

Since: Feb. 6, 2002<br>
Last updated: Dec. 18, 2002<br>
ONScripter のバイナリパッケージを提供してくださる方を募集中です。当方では Zaurus 用のバイナリパッケージのみ公開します。その他のプラットフォーム用のパッケージを公開していただける方は、リンクを張らせていただきますのでメールを下さい。
<HR>

<table>
<tr><th>はじめに</th></tr>
<tr><td>

<P>ONScripter（<A
HREF="http://wind.prohosting.com/ogapee/onscripter.html">メインサイト
</A>、<A HREF="http://www.angelfire.com/space/ogapee/onscripter.html">
ミラーサイト</A>）とは、NScripter 用に作られたスクリプトを独自に解釈し
て実行するプログラムです。</P>

<P>NScripterは<a
href="http://www2.osk.3web.ne.jp/~naokikun/index.htm">高橋直樹</a>氏が開発されたゲーム実行エンジンであり、高橋氏のホームページから<a href="http://www2.osk.3web.ne.jp/~naokikun/index.htm">ダウンロード</a>できます。</P>

<P>ONScripter で何ができるのかについてはαβεさんの[<A HREF="http://abe.nwr.jp/onscripter/">ONScripter のスゝメ</A>]を参照してください。</P>

<P>現在はベータ版<A HREF="onscripter-beta-20021218.tar.gz">onscripter-beta-20021218.tar.gz</A>を配布しております。<br>
(一つ前のベータ版<A HREF="onscripter-beta-20021215a.tar.gz">onscripter-beta-20021115a.tar.gz</A>)<br>
<!--(テスト版<A HREF="onscripter-beta-exp20021218.tar.gz">onscripter-beta-exp20021218.tar.gz</A>。問題がなければベータ版になります)<br>-->
</P>

<P>バイナリパッケージ</P>
<UL>
  <LI> <A HREF="zaurus/index.html#Package">Zaurus(SL-5500, SL-A300, SL-B500, SL-C700)用</A>
       （<A HREF="http://sourceforge.jp/projects/zaurus-ja/">zaurus-ja</A>でも公開中）
  <LI> <A HREF="http://www.parl.tutkie.tut.ac.jp/~koga/debian/woody/onscripter/">Debian Woody 用</A>（古賀さん）
       <UL>
	 <LI> deb http://www.parl.tutkie.tut.ac.jp/~koga/debian/woody ./
	 <LI> deb-src http://www.parl.tutkie.tut.ac.jp/~koga/debian/woody ./
       </UL>
  <LI> <A HREF="http://abe.nwr.jp/onscripter/rpms/">Red Hat 系(RPM) 用</A>（αβεさん）
  <LI> その他 MacOS X, FreeBSD ports 等募集中。
</UL>

<P>更新内容については[<A HREF="onscripter_devel.2002_4.html">開発日誌</A>]を参照して下さい。</P>

<P>動作報告・バグ報告・機能追加要望・パッチは随時受け付けますので[<A HREF="http://abe.nwr.jp/kagemai/kagemai.rhtml?project=ONScripter">バグトラッキングシステム</A>]までお願いします。<br>
「○○ゲームの××場面がなんかおかしい」という程度でも結構ですのでお気軽にどうぞ。<br>
[<a href="mailto:ogapee@aqua.dti2.ne.jp">ogapee@aqua.dti2.ne.jp</a>]まで直接送っていただいても構いません。</P>

</td></tr><tr><td>
<P>目次</P>

<UL>
  <LI> <A HREF="#feature"> 特徴 </A>
       <UL>
	 <LI> <A HREF="#feature_comparison">NScripter と比較した特徴</A>
	 <LI> <A HREF="#feature_engine">実行環境としての特徴</A>
       </UL>
  <LI> <A HREF="#howto">実行方法</A>
       <UL>
	 <LI> <A HREF="#environment">動作環境</A>
	 <LI> <A HREF="#compile">コンパイル</A>
	 <LI> <A HREF="#run">実行</A>
       </UL>
  <LI> <A HREF="#todo">TODO</A>
  <LI> <A HREF="#link">リンク</A>
  <LI> <A HREF="onscripter_faq.html">雑多なこと</A>
       <UL>
	 <LI> <A HREF="onscripter_faq.html#keyboard_shortcut">キーボードショートカットについて</A>
	 <LI> <A HREF="onscripter_faq.html#option">起動オプションについて</A>
	 <LI> <A HREF="onscripter_faq.html#registry">レジストリ読み込みについて</A>
	 <LI> <A HREF="onscripter_faq.html#edit_mode">音量及び変数編集モードについて</A>
	 <LI> <A HREF="onscripter_faq.html#true_type_font">TrueType font による漢字表示について</A>
	 <LI> <A HREF="onscripter_faq.html#cd_audio_mapping">CD audio 演奏の振り替えについて</A>
	 <LI> <A HREF="onscripter_faq.html#midi">MIDI 演奏機能について</A>
	 <LI> <A HREF="onscripter_faq.html#archive_compression">アーカイブ圧縮について</A><font color=red>(updated in Oct. 18, 2002)</font>
	 <LI> <A HREF="onscripter_faq.html#mp3_on_windows">Windows 上で MP3 の音がぶつぶつとぎれる問題について</A>
       </UL>
</UL>
</td></tr>
</table>


<table>
<tr><th><A NAME="feature">
特徴
</A></th></tr>
<tr><td>

<H3><A NAME="feature_comparison">
NScripter と比較した特徴
</A></H3>

<OL>
  <LI> 全ての操作をキーボードから行えます。もちろんマウスも使えますが、使う必要はありません。
  <LI> CD Audio の演奏に対応していますが、これを MP3 ファイルの演奏に振り替える機能もあります。
  <LI> マルチプラットフォームに対応しています。Windows, Linux, Mac OS X, <A HREF="zaurus/index.html">Zaurus(SL-5500,SL-A300,SL-B500,SL-C700)</A>, FreeBSD, Solaris(on SPARC) での動作が確認されていますが、下記の libjpeg, bzip2, SDL 及び SMPEG が動く環境ならどこでも同じソースをコンパイルするだけで動くはずです。<BR>
  <LI> 全てのコマンド・仕様を実装していないため、ゲームによって挙動がおかしくなります。その場合は上記バグトラッキングシステムまで御報告下さい。
</OL>

</td></tr>
<tr><td>

<H3><A NAME="feature_engine">
実行環境としての特徴
</A></H3>

<OL>
  <LI> セーブ・ロードができます(ただし、save?.dat は独自形式)。<BR>
  <LI> sar, nsa (nbz lzss を含む) アーカイブのデコードを実装しています。<BR>
  <LI> 全ての画面効果（quake 系, 効果番号 1 - 18）を実装しています。<BR>
  <LI> wav ファイル・MP3 ファイル・CD Audio・MIDI 演奏を実装しています。<BR>
  <LI> 右クリックメニュー（セーブ・ロード・回想・ウィンドウを消す・リセット・スキップ）を実装しています。<BR>
  <LI> カーソル・立ち絵・スプライトのアニメーションを実装しています。<BR>
</OL>

</td></tr>
</table>

<table>

<tr><th><A NAME="howto">
実行方法
</A></th></tr>
<tr><td>

<H3><A NAME="environment">
動作環境
</A></H3>

<P>下記のライブラリと処理系が必要です。バージョンは最新である必要はないかもしれませんが、他のバージョンでは確認していません。</P>

<DL>
  <DT> ・<A HREF="http://www.ijg.org/">Independent JPEG Group</A>
  <DD> libjpeg-6b
  <DT> ・<A HREF="http://sources.redhat.com/bzip2/">The bzip2 and libbzip2 official home page</A>
  <DD> bzip2-1.0.2
  <DT> ・<A HREF="http://www.libsdl.org">SDL (Simple Direct Layer)</A>
  <DD> SDL-1.2.4, SDL_image-1.2.2, SDL_mixer-1.2.3, SDL_ttf-2.0.5
  <DT> ・<A HREF="http://www.lokigames.com/development/smpeg.php3">SMPEG (SDL Mpeg Player Library)</A>
  <DD> SMPEG-0.4.4
  <DT> ・<A HREF="http://www.freetype.org/"> FreeType </A>
  <DD> FreeType 2.0.9 
  <DT> ・<A HREF="http://www.mars.org/home/rob/proj/mpeg/">MAD: Mpeg Audio Decoder</A>
  <DD> mad-0.14.2b
  <DD> これは必要ではありませんが、Zaurus で MP3 を聞きたい方はほぼ必須。
  <DD> コンパイル時に MP3_MAD を定義することで、SMPEG に差し換えて使用されます。
  <DT> ・Unicode で指定された日本語 TTF フォント
  <DT> ・C++ 処理系
  <DD> Linux g++ 2.95.4
  <DD> Windows Visual C++ 6.0
</DL>

<P>当方では Windows, Linux, <A HREF="zaurus/index.html">Zaurus(SL-5500,SL-C700)</A>で動作確認をしています。<BR>
また<A HREF="http://www.freeml.com/message/sdl-fan-jp@freeml.com/0000316">MacOS X</A>および FreeBSD, Solaris(on SPARC), Zaurus(SL-A300,SL-B500) での動作報告をいただいております。<br>

その他の多くの Unix 系 OS, BeOS, MacOS については上記のライブラリが対応しているため適切な Makefile を書けばコンパイル・実行できると思いますが、当方では確認できないので誰かやって下さい。</P>

<H3><A NAME="compile">
コンパイル
</A></H3>

<P>適当な場所に ONScripter を展開し、Linux の場合は make -f Makefile.Linux, Windows の場合は、nmake -f Makefile.Win とやって下さい。Windows の場合は、bzip2, SDL と SMPEG のヘッダファイルとライブラリのある場所を Makefile.Win で指定しているので、自身の環境に合わせて適宜修正してください。</P>

<H3><A NAME="run">
実行
</A></H3>

<P><FONT color="#ff0000">[必須]</FONT>まずゲームのアーカイブを一カ所にまとめます。通常は、スクリプト(0.txt もしくは nscript.dat)とアーカイブ(arc.sar もしくは arc.nsa)の２つのファイルがあれば十分なはずです。arc1.nsa 〜 arc9.nsa がある場合は、それも置いてください。またゲームによっては、アーカイブの外に一部の画像ファイルを置いていたりします。その場合は、それらのファイルも元と同じように置いてください。一番確実なのは、ディレクトリ毎全てのファイルをコピーしてくることです。</P>

<P><FONT color="#ff0000">[必須]</FONT>下記の&quot;TrueType font による漢字表示について&quot;を参考に、日本語 TrueType font を用意し、&quot;default.ttf&quot; という名前で置いてください。</P>

<P>[任意] CD audio の振り替え演奏をしたい場合は、下記の&quot;CD audio 演奏の振り替えについて&quot;に従って MP3 ファイルを用意してください。</P>

<P><FONT color="#ff0000">[必須]</FONT>最後に、ONScripter を実行してください。同じディレクトリにある nscript.dat とアーカイブを自動的に探し、ゲームが開始されます。なお ONScripter は、同じディレクトリにセーブデータやファイルログ等の状態ファイルを保存するため、このディレクトリには write permission を出しておいてください。</P>

</td></tr>
</table>

<table>
<tr><th><A NAME="todo">
TODO
</A></th></tr>
<tr><td>

<P>現在把握しており直す予定のバグ・未実装機能。先頭の文字は優先度。</P>

<OL>
  <LI> (<FONT color="#ff0000">高</FONT>)parser 周りの refine (text_line_flag, next_text_line_flag まわり)
  <LI> (<FONT color="#ff0000">高</FONT>)windowback の挙動がおかしいのを直す
  <LI> (<FONT color="#ff0000">高</FONT>)数字のところに「式」が使えるようにする(mov %0,1+(2*%4+(5-3 mod 2))など)
  <LI> (<FONT color="#ff8800">中</FONT>)btndown + btnwait でマウスのドラッグに対応させる。
  <LI> (<FONT color="#ff8800">中</FONT>)雪をスムーズに降らせる
  <LI> (<FONT color="#ff8800">中</FONT>)erasetextwindow off 時の選択画面での表示の正常化。
  <LI> (<FONT color="#00ff00">低</FONT>)btntime2 を正規に実装
  <LI> (<FONT color="#00ff00">低</FONT>)existspbtn を spbtn として実装しているが、それでよいのかを検証する。
  <LI> (<FONT color="#00ff00">低</FONT>)archive の検索の高速化
  <LI> (<FONT color="#00ff00">低</FONT>)alpha blend が遅いのをなんとかしたい
  <LI> (<FONT color="#00ff00">低</FONT>)sprite の現在の表示 cell を保存する？
  <LI> (<FONT color="#00ff00">低</FONT>)skip でマイナス方向にラベルをまたぐと破綻するバグ？を取る。lchk とのからみも考えて調べる。
  <LI> (<FONT color="#00ff00">低</FONT>)文字の色を変えたあとに絵の描画が入ると、文字の色が全部同じになってしまう。
  <LI> (<FONT color="#00ff00">低</FONT>)コードの clean up。
</OL>       

</td></tr>
</table>

<table>
<tr><th><A NAME="link">
リンク
</A></th></tr>
<tr><td>

<P>お世話になっているページ、よく利用させていただいているページへのリンクです。</P>

<DL>
  <DT> ○<A HREF="http://chig.vis.ne.jp/m/port.html">娯楽用アプリケーションの異機種間データ共有の試み</A>
  <DD> 千熊屋さんによる様々なゲーム互換エンジンへのリンク集です。ONScripter も紹介していただいてます。
  <DT> ○<A HREF="http://abe.nwr.jp/onscripter/">ONScripter のスゝメ</A>
  <DD> αβεさんによる ONScripter の導入方法・既存のゲームの動作状況・バグ報告のページです。<br>
       ONScripter を開発する上でたいへんお世話になっております。<br>
       <A HREF="http://www.daifukuya.com/kagemai/">影舞</A>を利用した<A HREF="http://abe.nwr.jp/kagemai/kagemai.rhtml?project=ONScripter">バグトラッキングシステム</A>も運用していただいております。<br>
       ONScripter に興味を持たれた方は最初にこちらのページを見ることをお勧めします。
  <DT> ○<A HREF="http://www.geocities.co.jp/Berkeley/2093/">Adas's Linux ゲームプログラム</A>
  <DD> Mac OS X で検証していただいている adas さんページです。<br>
       MacOS X 等に SDL をインストールする方法なども書かれています。
</DL>


</td></tr>
</table>

<A HREF="index.html">戻る</A>

<hr>
<DIV ALIGN="CENTER">
メール宛先 <a href="mailto:ogapee@aqua.dti2.ne.jp">ogapee@aqua.dti2.ne.jp</a> <BR>
Copyright (c) 1998-2002 Studio O.G.A. All rights reserved.
</DIV>

</BODY>
</HTML>

